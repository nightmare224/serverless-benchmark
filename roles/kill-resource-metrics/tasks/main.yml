---
- name: Pause 10 seconds to collect
  ansible.builtin.pause:
    seconds: 10

- name: Kill collect metrics script
  shell: ps aux | grep collect-metrics.sh | grep /bin/sh | awk '{print $2}' | xargs kill -9
  ignore_errors: true
  failed_when: false

- name: Fetch resource metrics from workers
  fetch:
    src: ~/floating-point-operation-sine-{{ ansible_user }}
    dest: "{{ role_path }}/../plot/files/data/resource/pod{{ pod_no }}/"
    flat: true